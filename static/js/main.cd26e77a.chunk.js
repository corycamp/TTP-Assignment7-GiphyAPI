(this.webpackJsonpassignment7=this.webpackJsonpassignment7||[]).push([[0],{15:function(t,e,n){},17:function(t,e,n){},18:function(t,e,n){"use strict";n.r(e);var i=n(0),r=n(2),a=n.n(r),c=n(9),o=n.n(c),u=(n(15),n(4)),s=n.n(u),l=n(8),d=n(3),g=n(5),f=n(1),h=function(t){var e=t.gifSrc,n=t.gifSmallSrc,r=t.mp4Src,a=t.mp4SmallSrc,c=t.title,o=t.url;return Object(i.jsx)("a",{href:o,target:"_blank",children:Object(i.jsxs)("picture",{children:[Object(i.jsx)("source",{type:"video/mp4",media:"(max-width: 599px)",srcSet:a}),Object(i.jsx)("source",{type:"video/mp4",media:"(min-width: 600px)",srcSet:r}),Object(i.jsx)("source",{type:"image/gif",media:"(max-width: 599px)",srcSet:n}),Object(i.jsx)("img",{src:e,alt:c})]})})},j=n(6),b=function(t){var e=t.onRandom,n=t.onChange,r=Object(j.a)(t,["onRandom","onChange"]);return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("input",Object(f.a)({onChange:function(t){return n(t.target.value)}},r)),Object(i.jsx)("input",{type:"submit",value:"Search"}),Object(i.jsx)("input",{type:"button",value:"I'm Feeling Lucky",onClick:e})]})},p=function(t){var e=t.label,n=t.data,r=t.onSelect,a=Object(j.a)(t,["label","data","onSelect"]);return Object(i.jsxs)("label",Object(f.a)(Object(f.a)({},a),{},{children:[e,Object(i.jsx)("select",{onChange:function(t){return r(t.target.value)},children:n.map((function(t){return Object(i.jsx)("option",{value:t,children:t.toUpperCase()},t)}))})]}))},v=function(){var t=Object(r.useState)(!1),e=Object(d.a)(t,2),n=e[0],i=e[1];return Object(r.useEffect)((function(){function t(){window.innerHeight+window.pageYOffset>=document.body.scrollHeight?i(!0):n&&i(!1)}return window.addEventListener("scroll",t),function(){return window.removeEventListener("scroll",t)}}),[]),[n,function(){return i(!1)}]},O=function(){var t=Object(r.useState)({width:window.innerWidth,height:window.innerHeight}),e=Object(d.a)(t,2),n=e[0],i=e[1];return Object(r.useEffect)((function(){function t(){i({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}}),[]),n},m=(n(17),"ASm5FU9hWdI91IB2OOUAR8uR19Ss4IWz"),y="https://api.giphy.com/v1/gifs/",S=["g","pg","pg-13","r"],x=S.reduce((function(t,e,n){return Object(f.a)(Object(f.a)({},t),{},Object(g.a)({},e,n))}),{}),w=["en","es","pt","id","fr","ar","tr","th","vi","de","it","ja","zh-CN","zh-TW","ru","ko","pl","nl","ro","hu","sv","cs","hi","bn","da","fa","tl","fi","iw","ms","no","uk"],E=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"g",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"en";return"".concat(y,"search?api_key=").concat(m,"&q=").concat(t,"&limit=").concat(n,"&offset=").concat(e,"&rating=").concat(i,"&lang=").concat(r)},k=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"g";return"".concat(y,"trending?api_key=").concat(m,"&limit=").concat(t,"&rating=").concat(e)},q=function(t){var e=t.images,n=e.fixed_width,i=n.mp4,r=n.url,a=e.fixed_width_small,c=a.mp4,o=a.url,u=t.url,s=t.rating;return{gifSrc:r,gifSmallSrc:o,mp4Src:i,mp4SmallSrc:c,url:u,title:t.title,rating:s}},C={gifLoad:function(t,e){var n,i;return Object(f.a)(Object(f.a)({},t),{},{gifs:e.data,isSearching:!1,isEnd:(null!==(n=null===(i=e.data)||void 0===i?void 0:i.length)&&void 0!==n?n:0)<50})},gifMore:function(t,e){var n,i;return Object(f.a)(Object(f.a)({},t),{},{gifs:t.trending?e.data:t.gifs.concat(e.data),isEnd:t.trending?e.data.length<t.gifs.length+50:t.gifs.length+(null!==(n=null===(i=e.data)||void 0===i?void 0:i.length)&&void 0!==n?n:0)<100,isBottom:!1})},reset:function(t,e){return Object(f.a)(Object(f.a)({},t),{},{trending:!0,isSearching:!1,gifs:[]})},searchSubmit:function(t,e){return Object(f.a)(Object(f.a)({},t),{},{trending:""===t.query,isSearching:""!==t.query,gifs:[],isEnd:!1})},queryUpdate:function(t,e){return Object(f.a)(Object(f.a)({},t),{},{query:e.value})},regionUpdate:function(t,e){return Object(f.a)(Object(f.a)({},t),{},{gif:[],region:e.value,trending:""===t.query,isSearching:""!==t.query,isEnd:!1})},ratingUpdate:function(t,e){return x[e.value]<x[t.rating]?Object(f.a)(Object(f.a)({},t),{},{gifs:t.gifs.filter((function(t){var n=t.rating;return x[n]<=x[e.value]})),rating:e.value}):Object(f.a)(Object(f.a)({},t),{},{gifs:[],rating:e.value,isEnd:!1})},bottomHit:function(t,e){return Object(f.a)(Object(f.a)({},t),{},{trending:""===t.query,isSearching:""!==t.query,isBottom:!0,isEnd:t.isEnd})}},R=function(t,e){var n,i;return null!==(n=null===(i=C[e.type])||void 0===i?void 0:i.call(C,t,e))&&void 0!==n?n:t},L={trending:!0,isSearching:!1,isBottom:!1,isEnd:!1,query:"",gifs:[],rating:"g",region:"en"};var M=function(){var t=Object(r.useReducer)(R,L),e=Object(d.a)(t,2),n=e[0],a=e[1],c=O().width,o=v(),u=Object(d.a)(o,2),g=u[0],j=u[1],x=c>=600?200:100;return Object(r.useEffect)((function(){var t,e,i=new AbortController;function r(){return o.apply(this,arguments)}function o(){return(o=Object(l.a)(s.a.mark((function t(){var e,r,c,o,u;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=i.signal,r=n.trending?k(n.gifs.length*(Math.floor(n.gifs.length/50)+1),n.rating):E(n.query,n.gifs.length,void 0,n.rating,n.region),console.log("Endpoint ",r),t.prev=2,t.next=5,fetch(r,{abortSignal:e});case 5:return c=t.sent,t.next=8,c.json();case 8:o=t.sent,u=o.data,a({type:"gifMore",data:u.map(q)}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(2),console.log("Error ",t.t0);case 16:case"end":return t.stop()}}),t,null,[[2,13]])})))).apply(this,arguments)}function u(){return d.apply(this,arguments)}function d(){return(d=Object(l.a)(s.a.mark((function t(){var e,r,c,o,u;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=i.signal,r=n.trending?k(void 0,n.rating):E(n.query,void 0,void 0,n.rating,n.region),console.log("Endpoint ",r),t.prev=2,t.next=5,fetch(r,{abortSignal:e});case 5:return c=t.sent,t.next=8,c.json();case 8:o=t.sent,u=o.data,a({type:"gifLoad",data:u.map(q)}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(2),console.log("Error ",t.t0);case 16:case"end":return t.stop()}}),t,null,[[2,13]])})))).apply(this,arguments)}if(!n.isEnd)if(n.isSearching)""===n.query?a({type:"reset"}):n.gifs.length<50?u():(n.isBottom||Math.floor(c)>=1e3&&(null!==(t=null===(e=n.gifs)||void 0===e?void 0:e.length)&&void 0!==t?t:0)<=Math.floor(c/1e3*50))&&r();else if(n.trending){var g,f;n.gifs.length<50?u():(n.isBottom||Math.floor(c)>=1e3&&(null!==(g=null===(f=n.gifs)||void 0===f?void 0:f.length)&&void 0!==g?g:0)<=Math.floor(c/1e3*50))&&r()}return function(){console.log("Abort"),i.abort()}}),[n,c]),Object(r.useEffect)((function(){g&&(a({type:"bottomHit"}),j())}),[g,j]),Object(i.jsxs)("div",{className:"App",children:[Object(i.jsxs)("form",{id:"SearchBar",onSubmit:function(t){t.preventDefault(),a({type:"searchSubmit"})},children:[Object(i.jsx)(b,{placeholder:"Search Giphy",value:n.query,onChange:function(t){return a({type:"queryUpdate",value:t})},onRandom:function(){var t=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"g";return"".concat(y,"random?api_key=").concat(m,"&rating=").concat(e).concat(""===t?"":"&tag=".concat(t))}(n.query,n.rating);console.log("Endpoint: ",t),fetch(t).then((function(t){return t.json()})).then((function(t){var e=t.data.url;return window.open(e,"_blank")}))},id:"SearchInput"}),Object(i.jsxs)("div",{id:"filters",children:[Object(i.jsx)(p,{className:"filter",label:"Region: ",data:w,onSelect:function(t){return a({type:"regionUpdate",value:t})}}),Object(i.jsx)(p,{className:"filter",label:"Rating: ",data:S,onSelect:function(t){return a({type:"ratingUpdate",value:t})}})]})]}),n.trending?Object(i.jsx)("h2",{children:"Trending: "}):Object(i.jsx)("h2",{children:"Search Results: "}),Object(i.jsx)("section",{id:"gifs",style:{width:Math.floor(c/x)*x,columns:Math.floor(c/x)},children:n.isEnd&&0===n.gifs.length?Object(i.jsx)("h2",{children:"No Results."}):n.isSearching&&0===n.gifs.length?Object(i.jsx)("h2",{children:"Loading..."}):n.gifs.map((function(t,e){return Object(r.createElement)(h,Object(f.a)(Object(f.a)({},t),{},{key:e}))}))}),n.isEnd&&Object(i.jsx)("h2",{children:"End of Results"})]})},B=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,19)).then((function(e){var n=e.getCLS,i=e.getFID,r=e.getFCP,a=e.getLCP,c=e.getTTFB;n(t),i(t),r(t),a(t),c(t)}))};o.a.render(Object(i.jsx)(a.a.StrictMode,{children:Object(i.jsx)(M,{})}),document.getElementById("root")),B()}},[[18,1,2]]]);
//# sourceMappingURL=main.cd26e77a.chunk.js.map