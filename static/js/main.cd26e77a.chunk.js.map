{"version":3,"sources":["Components/Gif.jsx","Components/Search.jsx","Components/SelectArray.jsx","Hooks/useScrollBottom.js","Hooks/useWindowSize.js","App.js","reportWebVitals.js","index.js"],"names":["Gif","gifSrc","gifSmallSrc","mp4Src","mp4SmallSrc","title","url","href","target","type","media","srcSet","src","alt","Search","onRandom","onChange","rest","e","value","onClick","SelectArray","label","data","onSelect","map","text","toUpperCase","useScrollBottom","useState","isBottom","setOnBottom","useEffect","handleScroll","window","innerHeight","pageYOffset","document","body","scrollHeight","addEventListener","removeEventListener","useWindowSize","width","innerWidth","height","windowSize","setWindowSize","handleResize","API_KEY","baseUrl","ratings","ratingsIndex","reduce","a","v","i","regions","buildSearchUrl","query","offset","limit","rating","lang","buildTrendingUrl","mapGifs","images","fixed_width","mp4","fixed_width_small","reducers","gifLoad","state","action","gifs","isSearching","isEnd","length","gifMore","trending","concat","reset","searchSubmit","queryUpdate","regionUpdate","gif","region","ratingUpdate","filter","bottomHit","rootReducer","initialState","App","useReducer","dispatch","cleanBottom","pictureWidth","controller","AbortController","fetchMore","abortSignal","signal","Math","floor","undefined","console","log","fetch","response","json","fetchGifs","searchUrl","abort","className","id","onSubmit","preventDefault","placeholder","tag","buildRandomUrl","then","res","open","style","columns","props","key","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.cd26e77a.chunk.js","sourcesContent":["\nconst Gif = ({ gifSrc, gifSmallSrc, mp4Src, mp4SmallSrc, title, url }) => (\n<a href={url} target=\"_blank\" >\n <picture>\n     <source type=\"video/mp4\" media=\"(max-width: 599px)\" srcSet={mp4SmallSrc} />\n     <source type=\"video/mp4\" media=\"(min-width: 600px)\" srcSet={mp4Src} />\n     <source type=\"image/gif\" media=\"(max-width: 599px)\" srcSet={gifSmallSrc} />\n     <img src={gifSrc} alt={title} />\n </picture>\n</a>   \n)\n\nexport default Gif","\nconst Search = ({ onRandom, onChange, ...rest }) => (<>\n        <input onChange={e => onChange(e.target.value)} {...rest} />\n        <input type=\"submit\" value=\"Search\" />\n        <input type=\"button\" value=\"I'm Feeling Lucky\" onClick={onRandom} />\n</>)\n\nexport default Search","\nconst SelectArray = ({ label, data, onSelect, ...rest }) => (\n    <label {...rest}>\n          { label }\n          <select onChange={e => onSelect(e.target.value)}>\n            { data.map(text => <option key={text} value={text}>{text.toUpperCase()}</option>) }\n          </select>\n    </label>\n)\n\nexport default SelectArray","import { useEffect, useState } from 'react'\n\nconst useScrollBottom = () => {\n    const [isBottom, setOnBottom] = useState(false)\n  \n    useEffect(() => {\n      function handleScroll() {\n        if (window.innerHeight + window.pageYOffset >= document.body.scrollHeight) {\n          setOnBottom(true)\n        } else if (isBottom) {\n          setOnBottom(false)\n        }\n      }\n      window.addEventListener('scroll', handleScroll)\n      return () => window.removeEventListener('scroll', handleScroll)\n    }, [])\n  \n    return [ isBottom, () => setOnBottom(false) ]\n}\n\nexport default useScrollBottom","import { useState, useEffect } from 'react'\n\nconst useWindowSize = () => {\n    const [windowSize, setWindowSize] = useState({\n        width: window.innerWidth,\n        height: window.innerHeight\n    });\n  \n    useEffect(() => {\n      function handleResize() {\n        setWindowSize({\n            width: window.innerWidth,\n            height: window.innerHeight\n          })\n      }\n      \n      window.addEventListener(\"resize\", handleResize)\n      return () => window.removeEventListener(\"resize\", handleResize)\n    }, [])\n  \n    return windowSize\n}\n\nexport default useWindowSize","import { useEffect, useReducer } from 'react'\nimport { Gif, Search, SelectArray } from './Components'\nimport { useScrollBottom, useWindowSize } from './Hooks'\nimport './App.css';\n\nconst API_KEY = 'ASm5FU9hWdI91IB2OOUAR8uR19Ss4IWz',\n      baseUrl = 'https://api.giphy.com/v1/gifs/'\n\nconst ratings = [ \"g\", \"pg\", \"pg-13\", \"r\" ]\nconst ratingsIndex = ratings.reduce((a, v, i) => ({ ...a, [v]: i }) , {})\nconst regions = [ \"en\", \"es\", \"pt\", \"id\", \"fr\", \"ar\", \"tr\", \"th\", \"vi\", \"de\", \"it\", \"ja\", \"zh-CN\", \"zh-TW\", \"ru\", \"ko\", \"pl\", \"nl\", \"ro\", \"hu\", \"sv\", \"cs\", \"hi\", \"bn\", \"da\", \"fa\", \"tl\", \"fi\", \"iw\", \"ms\", \"no\", \"uk\" ]\n\nconst buildSearchUrl = (\n    query, \n    offset=0, \n    limit=50, \n    rating='g', \n    lang='en'\n  ) => `${baseUrl}search?api_key=${API_KEY}&q=${query}&limit=${limit}&offset=${offset}&rating=${rating}&lang=${lang}`,\n  buildTrendingUrl = (\n    limit=50,\n    rating='g'\n  ) => `${baseUrl}trending?api_key=${API_KEY}&limit=${limit}&rating=${rating}`,\n  buildRandomUrl = (\n    tag='',\n    rating='g'\n  ) => `${baseUrl}random?api_key=${API_KEY}&rating=${rating}${tag === '' ? '' : `&tag=${tag}`}` \n\n\nconst mapGifs = ({ \n  images: {\n    fixed_width: {\n      mp4: mp4Src,\n      url: gifSrc\n    },\n    fixed_width_small: {\n      mp4: mp4SmallSrc,\n      url: gifSmallSrc\n    }\n  }, \n  url, \n  rating, \n  title \n}) => ({\n  gifSrc,\n  gifSmallSrc,\n  mp4Src,\n  mp4SmallSrc,\n  url,\n  title,\n  rating\n})\n\nconst reducers = {\n  gifLoad: (state, action) => ({\n    ...state,\n    gifs: action.data,\n    isSearching: false,\n    isEnd: (action.data?.length ?? 0) < 50\n  }),\n  gifMore: (state, action) => ({\n    ...state,\n    gifs: state.trending ? action.data : state.gifs.concat(action.data),\n    isEnd: state.trending ? action.data.length < (state.gifs.length + 50) : (state.gifs.length + (action.data?.length ?? 0)) < 100,\n    isBottom: false\n  }),\n  reset: (state, action) => ({\n    ...state,\n    trending: true,\n    isSearching: false,\n    gifs: []\n  }),\n  searchSubmit: (state, action) => ({\n    ...state,\n    trending: state.query === '',\n    isSearching: state.query !== '',\n    gifs: [],\n    isEnd: false\n  }),\n  queryUpdate: (state, action) => ({\n    ...state,\n    query: action.value\n  }),\n  regionUpdate: (state, action) => ({\n    ...state,\n    gif: [],\n    region: action.value,\n    trending: state.query === '',\n    isSearching: state.query !== '',\n    isEnd: false\n  }),\n  ratingUpdate: (state, action) => ratingsIndex[action.value] < ratingsIndex[state.rating]\n    ? ({ ...state, gifs: state.gifs.filter(({ rating }) => ratingsIndex[rating] <= ratingsIndex[action.value]), rating: action.value })\n    : ({ ...state, gifs: [], rating: action.value, isEnd: false }),\n  bottomHit: (state, action) => ({\n    ...state,\n    trending: state.query === '',\n    isSearching: state.query !== '',\n    isBottom: true,\n    isEnd: state.isEnd\n  })\n }\n\nconst rootReducer = (state, action) => reducers[action.type]?.(state, action) ?? state\n\nconst initialState = {\n  trending: true,\n  isSearching: false, \n  isBottom: false,\n  isEnd: false, \n  query: '',\n  gifs: [],\n  rating: 'g',\n  region: 'en'\n}\n\nfunction App() {\n  const [ state, dispatch ] = useReducer(rootReducer, initialState)\n  const { width } = useWindowSize()\n  const [ isBottom, cleanBottom ] = useScrollBottom()\n  const pictureWidth = width >= 600 ? 200 : 100\n  const handleRandom = () => {\n    const url = buildRandomUrl(state.query, state.rating) \n    console.log('Endpoint: ', url)\n    fetch(url).then(res => res.json())\n              .then(({ data: { url }}) => window.open(url, '_blank'))\n  }\n\n  useEffect(() => {\n    const controller = new AbortController()\n\n    async function fetchMore() {\n      const abortSignal = controller.signal,\n            url = state.trending ? buildTrendingUrl(state.gifs.length * (Math.floor(state.gifs.length / 50) + 1), state.rating)\n                             : buildSearchUrl(state.query, state.gifs.length, undefined, state.rating, state.region)\n      console.log('Endpoint ', url)\n      try {\n        \n        const response = await fetch(url, { abortSignal })\n        const { data } = await response.json()\n        dispatch({ type: 'gifMore', data: data.map(mapGifs) })\n      } catch (e) {\n        console.log('Error ', e)\n      }\n    }\n\n    async function fetchGifs() {\n      const abortSignal = controller.signal,\n            searchUrl = state.trending ? buildTrendingUrl(undefined, state.rating)\n                                 : buildSearchUrl(state.query, undefined, undefined, state.rating, state.region)\n      console.log('Endpoint ', searchUrl)\n      try {\n        const response = await fetch(searchUrl, { abortSignal })\n        const { data } = await response.json()\n        dispatch({ type: 'gifLoad',  data: data.map(mapGifs) })\n      } catch (e) {\n        console.log('Error ', e)\n      }\n    }\n\n    if(!state.isEnd) {\n      if (state.isSearching) {\n        if (state.query === '') dispatch({ type: 'reset' })\n        else if (state.gifs.length < 50) fetchGifs()\n        else if (state.isBottom || ((Math.floor(width) >= 1000) && (state.gifs?.length ?? 0) <= Math.floor((width / 1000) * 50))) fetchMore()\n      } else if (state.trending) {\n        if (state.gifs.length < 50) fetchGifs()\n        else if (state.isBottom || ((Math.floor(width) >= 1000) && (state.gifs?.length ?? 0) <= Math.floor((width / 1000) * 50))) fetchMore()\n      }\n    }\n\n    return () => {\n      console.log('Abort')\n      controller.abort()\n    }\n\n  }, [ state, width ])\n\n  useEffect(() => { \n    if (isBottom) {\n      dispatch({ type: 'bottomHit' }) \n      cleanBottom()\n    }\n  }, [isBottom, cleanBottom] ) \n\n  return (\n    <div className=\"App\">\n      <form id=\"SearchBar\" onSubmit={e => { e.preventDefault(); dispatch({ type: 'searchSubmit' }) }}>\n        <Search \n          placeholder=\"Search Giphy\" \n          value={state.query} \n          onChange={value => dispatch({ type: 'queryUpdate', value })}  \n          onRandom={handleRandom} \n          id=\"SearchInput\"\n        />\n        <div id=\"filters\">\n          <SelectArray className=\"filter\" label=\"Region: \" data={regions} onSelect={value => dispatch({ type: 'regionUpdate', value })} />\n          <SelectArray className=\"filter\" label=\"Rating: \" data={ratings} onSelect={value => dispatch({ type: 'ratingUpdate', value })} />\n        </div>\n      </form>\n      { state.trending ? <h2>Trending: </h2> : <h2>Search Results: </h2> }\n      <section id=\"gifs\" style={{ width: Math.floor(width / pictureWidth) * pictureWidth , columns: Math.floor(width / pictureWidth) }}>\n        {\n          state.isEnd && state.gifs.length === 0\n            ? <h2>No Results.</h2>\n            : state.isSearching && state.gifs.length === 0\n              ? <h2>Loading...</h2>\n              : state.gifs.map((props, i) => <Gif {...props} key={i} />)\n        }\n      </section>\n      { state.isEnd && <h2>End of Results</h2>}\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}